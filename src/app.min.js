if($(".datatable").length>0){var table=$(".datatable:not(#puantajTable)").DataTable({autoWidth:false,order:false,language:{url:"src/tr.json"},buttons:[{extend:"excelHtml5",className:"d-none",exportOptions:{columns:":visible:not(.no-export)"}}],layout:{bottomStart:"pageLength",bottom2Start:"info",topStart:null,topEnd:null},initComplete:function(t,e){var n=this.api();var a=t.sTableId;$("#"+a+" thead").append('<tr class="search-input-row"></tr>');n.columns().every(function(){let e=this;let n=e.header().textContent;if(n!="İşlem"){let t=document.createElement("input");t.placeholder=n;t.classList.add("form-control");t.classList.add("form-control-sm");t.setAttribute("autocomplete","off");$("#"+a+" .search-input-row").append($('<th class="search">').append(t));$(t).on("keyup change",function(){if(e.search()!==this.value){e.search(this.value).draw()}})}else{$("#"+a+" .search-input-row").append("<th></th>")}})}});$("#export_excel").on("click",function(){table.button(".buttons-excel").trigger()});$("#export_excel_puantaj_info").on("click",function(){var t=$("#puantaj_info_table").DataTable();t.button(".buttons-excel").trigger()});var puantaj_table=$("#puantajTable").DataTable({ordering:false,layout:{bottomStart:"pageLength",bottom2Start:"info",topStart:null,topEnd:"search"},language:{url:"src/tr.json"},buttons:[{extend:"excelHtml5",className:"d-none",exportOptions:{columns:":visible:not(.no-export)"}}],initComplete:function(t,e){var n=this.api();var a=t.sTableId;$("#"+a+" thead").append('<tr class="search-input-row"></tr>');n.columns().every(function(){let e=this;let t=n.column(0).header().textContent;if(e.index()==0||e.index()==1){let t=document.createElement("input");t.placeholder=e.index()===0?"Adı Soyadı":"Unvanı";t.classList.add("form-control");t.classList.add("form-control-sm");t.setAttribute("autocomplete","off");$("#"+a+" thead tr:eq(1) th:eq("+e.index()+")").append(t);$(t).on("keyup change",function(){if(e.search()!==this.value){e.search(this.value).draw()}})}})}});$("#export_excel_puantaj").on("click",function(){puantaj_table.button(".buttons-excel").trigger()})}if($(".select2").length>0){$(".select2").select2();$("#products").select2({dropdownParent:$(".modal")});$(".modal .select2").select2({dropdownParent:$(".modal")});$("#amount_money").select2({dropdownParent:$(".modal")});$("#wage_cut_month, #wage_cut_year,#income_month, #income_year, #payment_month, #payment_year").select2({dropdownParent:$(".modal")})}$(document).ready(function(){if($(".summernote").length>0){var t=$(window).height()*.37;$(".summernote").summernote({height:t,callbacks:{onInit:function(){$(".summernote").summernote("height",t)}}})}});if($(".flatpickr").length>0){$(".flatpickr").flatpickr({dateFormat:"d.m.Y",locale:"tr"})}function formatNumber(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}$(document).on("click",".route-link",function(){var t=$(this).data("page");var e="index.php?p="+t;window.location=e});if($(".select2").length>0){$(".select2.islem").select2({tags:true})}function dtSearchInput(t,e,n){}function deleteRecord(t=this,e=null,n="Kayıt silinecektir!",a="/api/ajax.php"){var o=$(t).closest("tr");var i=$(t).closest("table")[0].id;var r=$("#"+i).DataTable();var s=r.row(o);var l=$(t).data("id");const c=new FormData;c.append("action",e);c.append("id",l);AlertConfirm(n).then(t=>{fetch(a,{method:"POST",body:c}).then(t=>t.json()).then(e=>{if(e.status=="success"){title="Başarılı!";icon="success"}else{title="Hata!";icon="error"}Swal.fire({title:title,text:e.message,icon:icon}).then(t=>{if(t.isConfirmed){if(e.status=="success")s.remove().draw(false);return e}})}).catch(t=>alert("Error deleting : "+t))})}async function deleteRecordByReturn(t,e=null,n="Kayıt silinecektir!",a="/api/ajax.php"){var o=$(t).closest("tr");var i=$(t).closest("table")[0].id;var r=$("#"+i).DataTable();var s=r.row(o);var l=$(t).data("id");const c=new FormData;c.append("action",e);c.append("id",l);const d=await AlertConfirm(n);if(d){try{const u=await fetch(a,{method:"POST",body:c});const m=await u.json();let t,e;if(m.status=="success"){t="Başarılı!";e="success"}else{t="Hata!";e="error"}await Swal.fire({title:t,text:m.message,icon:e});if(m.status=="success"){s.remove().draw(false)}return m}catch(t){console.error("Error deleting:",t);return{status:"error",message:"Bir hata oluştu."}}}}function AlertConfirm(t="Emin misiniz?"){return new Promise((e,n)=>{Swal.fire({title:"Emin misiniz?",text:t,icon:"warning",showCancelButton:true,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Evet, Sil!"}).then(t=>{if(t.isConfirmed){e(true)}else{n(false)}})})}$(document).on("change","#myFirm",function(){var t=new URLSearchParams(window.location.search).get("p");window.location="set-session.php?p="+t+"&firm_id="+$(this).val()});function fadeOut(t,e){var n=1;var a=50;var o=a/e;function i(){n-=o;if(n<=0){n=0;t.style.display="none";clearInterval(r)}t.style.opacity=n}var r=setInterval(i,a)}function getTowns(t,n){let e=new FormData;e.append("city_id",t);e.append("action","getTowns");fetch("/api/il-ilce.php",{method:"POST",body:e}).then(t=>t.json()).then(t=>{let e=t.towns;$(n).html(e)}).catch(t=>{console.error("Error:",t)})}function checkPersonId(t){if(t==0){swal.fire({title:"Hata",icon:"warning",text:"Öncelikle personeli kaydetmeniz gerekir!"});return false}return true}function checkId(t,e){if(t==0){swal.fire({title:"Hata",icon:"warning",text:"Öncelikle "+e+" kaydetmeniz gerekir!"});return false}return true}document.addEventListener("click",function(t){if(t.target.closest(".fab-menu")===null){const e=document.getElementById("fab-options");const n=document.getElementById("main-icon");const a=document.getElementById("close-icon");if(e.style.display==="block"){e.classList.remove("show");setTimeout(()=>{e.style.display="none"},300);n.style.opacity=1;a.style.opacity=0}}});function toggleFabMenu(){const t=document.getElementById("fab-options");const e=document.getElementById("main-icon");const n=document.getElementById("close-icon");if(t.style.display==="none"||t.style.display===""){t.style.display="block";setTimeout(()=>{t.classList.add("show")},10);e.style.opacity=0;n.style.opacity=1}else{t.classList.remove("show");setTimeout(()=>{t.style.display="none"},300);e.style.opacity=1;n.style.opacity=0}}function goWhatsApp(){const t="905079432723";const e=encodeURIComponent("Merhaba, Teknik desteğe ihtiyacım var");const n=`https://wa.me/send?phone=${t}&text=${e}`;window.open(n,"_blank")}